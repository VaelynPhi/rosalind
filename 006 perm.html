<html><head><style type="text/css">
.hidden { display: none; }
</style><script type="text/ecmascript" src="/libs/jquery.js"></script><script type="text/ecmascript">

function permute(u, debug, level){
	level = ( ( (level == undefined) || (level == null) ) ? ("") : (level + "\t") );
	if(debug) $(debug).append(level +"I: "+ JSON.stringify(u) +"\n" );
	var a = [];
	if(u.length == 1){
		a = [ u ];
	}else{
		a = $.map(u,function(av,ai,au){
			if(debug) $(debug).append(level +"b-I: "+ JSON.stringify(au) +"\n" );
			var bu = au.slice();
			bu.splice(ai,1);
			if(debug) $(debug).append(level +"b-D: "+ av +"/"+ JSON.stringify(bu) +"\n" );
			var bp = permute(bu, debug, level);
			var b = $.map(bp, function(cv,ci,bv){
				if(debug) $(debug).append(level +"c-ie("+ ci +"): "+ JSON.stringify(bv) +"\n" );
				if(debug) $(debug).append(level +"c-v: "+ JSON.stringify(cv) +"\n" );
				cv.push(bv);
				if(debug) $(debug).append(level +"c-O ("+ ci +"): "+ JSON.stringify(cv) +"\n" );
				return [cv];
			}, av);
			if(debug) $(debug).append(level +"b-O: "+ JSON.stringify(b) +"\n" );
			return b;
		}, u);
	}
	if(debug) $(debug).append(level +"O: "+ JSON.stringify(a) +"\n" );
	return a;
}

$(function(){

	// var l = 3;
	// var i=0;
	var g = [1,2,3,4];
	// while(i++<l){
	// 	g.push(i);
	// }
	var res = permute(g); //, "#results");
	$("#results").append(
		"\n\nResults:\n"+
		$.map(res,function(v,i){
			return i +": "+ JSON.stringify(v);
		}).join("\n")
	);

});


</script></head><body><pre id="info"></pre><pre id="results"></pre><pre id="input" class="hidden">
</pre></body></html>